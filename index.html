<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YÃªu BÃ­ch ChÄƒm ðŸ’–</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: radial-gradient(circle at center, #ff99cc, #660033);
    height: 100vh;
  }

  canvas {
    position: absolute;
    top: 0; left: 0;
  }

  h1 {
    position: absolute;
    width: 100%;
    text-align: center;
    top: 45%;
    font-family: 'Comic Sans MS', cursive;
    font-size: 2em;
    color: #fff;
    text-shadow: 0 0 20px #ff66cc, 0 0 40px #ff0066;
    animation: sparkle 2s infinite;
    opacity: 0;
    transition: opacity 1.5s ease-in;
  }

  @keyframes sparkle {
    0% { text-shadow: 0 0 5px #ff99cc, 0 0 10px #ff33cc; }
    50% { text-shadow: 0 0 20px #ff66cc, 0 0 40px #ff0066; }
    100% { text-shadow: 0 0 5px #ff99cc, 0 0 10px #ff33cc; }
  }
</style>
</head>
<body>
<canvas id="hearts"></canvas>
<h1 id="text">YÃªu BÃ­ch ChÄƒm nháº¥t trÃªn tháº¿ gian nÃ y ðŸ’ž</h1>
<audio id="music" src="music1709.mp3" autoplay></audio>

<script>
const canvas = document.getElementById('hearts');
const ctx = canvas.getContext('2d');
let W = canvas.width = window.innerWidth;
let H = canvas.height = window.innerHeight;
window.addEventListener('resize', () => {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
});

let hearts = [];
const num = 1200;
for (let i = 0; i < num; i++) {
  hearts.push({
    x: Math.random() * W,
    y: Math.random() * H,
    size: Math.random() * 2 + 1,
    speedY: Math.random() * 1 + 0.5,
    alpha: Math.random(),
    phase: Math.random() * Math.PI * 2
  });
}

function drawHeart(x, y, size, color) {
  ctx.save();
  ctx.translate(x, y);
  ctx.scale(size, size);
  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.bezierCurveTo(-2, -2, -2, -6, 0, -8);
  ctx.bezierCurveTo(2, -6, 2, -2, 0, 0);
  ctx.fillStyle = color;
  ctx.fill();
  ctx.restore();
}

let time = 0;
function animate() {
  ctx.clearRect(0, 0, W, H);
  time += 0.01;

  hearts.forEach(h => {
    h.y += h.speedY;
    if (h.y > H) {
      h.y = -10;
      h.x = Math.random() * W;
    }

    // táº¡o chuyá»ƒn Ä‘á»™ng táº­p trung láº¡i thÃ nh hÃ¬nh trÃ¡i tim lá»›n
    const t = time * 0.5;
    const heartX = 16 * Math.pow(Math.sin(t), 3);
    const heartY = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));

    const centerX = W / 2;
    const centerY = H / 2;

    const targetX = centerX + heartX * 20;
    const targetY = centerY + heartY * 20;

    if (time > 5 && time < 12) {
      h.x += (targetX - h.x) * 0.01;
      h.y += (targetY - h.y) * 0.01;
    }

    const color = `rgba(255, ${100+Math.random()*155}, ${150+Math.random()*105}, ${h.alpha})`;
    drawHeart(h.x, h.y, h.size, color);
  });

  // sau 12s hiá»‡n chá»¯
  if (time > 12) {
    document.getElementById('text').style.opacity = 1;
  }

  requestAnimationFrame(animate);
}

animate();

// Tá»± Ä‘á»™ng báº­t nháº¡c
const music = document.getElementById('music');
music.volume = 0.5;
music.play().catch(() => {
  // Má»™t sá»‘ trÃ¬nh duyá»‡t cáº§n click Ä‘á»ƒ phÃ¡t, cÃ³ thá»ƒ thÃªm hÆ°á»›ng dáº«n náº¿u muá»‘n
});
</script>
</body>
</html>
