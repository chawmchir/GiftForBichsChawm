<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G·ª©i B√≠ch ChƒÉm</title>
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #fce4ec; 
            color: #4a4a4a;
            overflow: hidden; /* Quan tr·ªçng ƒë·ªÉ tr√°i tim bay ra ngo√†i m√† kh√¥ng t·∫°o scrollbar */
        }

        .container {
            position: relative; /* Quan tr·ªçng ƒë·ªÉ tr√°i tim bay trong container */
            background-color: #ffffff;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 650px;
            width: 90%;
            text-align: center;
            border: 3px solid #ff80ab;
            z-index: 1; /* ƒê·∫£m b·∫£o n·ªôi dung ch√≠nh ·ªü tr√™n tr√°i tim */
        }

        h1 {
            color: #d81b60;
            margin-bottom: 30px;
            font-size: 1.8em;
        }
        
        #startButton {
            padding: 12px 25px;
            font-size: 18px;
            font-weight: bold;
            background-color: #ff80ab;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 2; /* ƒê·∫£m b·∫£o n√∫t ·ªü tr√™n tr√°i tim */
            position: relative; /* ƒê·ªÉ z-index c√≥ hi·ªáu l·ª±c */
        }

        #startButton:hover {
            background-color: #f06292;
            transform: translateY(-2px);
        }

        #typewriter-text {
            text-align: left;
            white-space: pre-wrap; 
            min-height: 50px;
            font-size: 1.15em;
            line-height: 1.6;
            margin-top: 20px;
            border-left: 3px solid #f06292;
            padding-left: 15px;
            position: relative; /* ƒê·ªÉ ƒë·∫£m b·∫£o tr√°i tim kh√¥ng che ch·ªØ */
            z-index: 2;
        }

        /* Hi·ªáu ·ª©ng con tr·ªè nh·∫•p nh√°y */
        .typing::after {
            content: '|';
            animation: blink-caret .75s step-end infinite;
            display: inline-block;
            font-weight: bold;
            color: #d81b60;
        }

        @keyframes blink-caret {
            from, to { opacity: 0 }
            50% { opacity: 1; }
        }

        /* Style cho tr√°i tim bay */
        .heart {
            position: absolute;
            font-size: 1.2em; /* K√≠ch th∆∞·ªõc tr√°i tim */
            color: #ff80ab; /* M√†u h·ªìng */
            opacity: 0;
            animation: floatUp 4s forwards; /* Th·ªùi gian bay v√† gi·ªØ tr·∫°ng th√°i cu·ªëi */
            pointer-events: none; /* Kh√¥ng ch·∫∑n s·ª± ki·ªán click */
            text-shadow: 0 0 5px rgba(255, 128, 171, 0.5); /* L·∫•p l√°nh nh·∫π */
            z-index: 0; /* ƒê·∫£m b·∫£o tr√°i tim ·ªü d∆∞·ªõi l·ªõp ch·ªØ */
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.8;
                transform: translateY(-20%) scale(0.8) translateX(var(--x-offset));
            }
            100% {
                transform: translateY(-150%) scale(1.2) translateX(var(--x-offset));
                opacity: 0;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>G·ª≠i BichsChawmüíï</h1>
        
        <button id="startButton">B·∫•m v√†o ƒë√¢y ƒë·ªÉ m·ªü</button>
        
        <p id="typewriter-text"></p>
        
        <audio id="background-music" loop>
            <source src="music1709.mp3" type="audio/mp3">
            Tr√¨nh duy·ªát c·ªßa em kh√¥ng h·ªó tr·ª£ ph√°t nh·∫°c.
        </audio>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const textElement = document.getElementById('typewriter-text');
            const startButton = document.getElementById('startButton');
            const music = document.getElementById('background-music');
            const container = document.querySelector('.container');

            const TYPING_SPEED = 50; 
            let index = 0;
            let heartInterval; // ƒê·ªÉ l∆∞u ID c·ªßa setInterval t·∫°o tr√°i tim
            
            const fullText = "Anh ch·ªù em ng·ªß anh m·ªõi d√°m n√≥i, anh n√≥i xong anh bi·∫øt ch·∫Øc l√† s√°ng mai em ch·ªâ tr·∫£ l·ªùi m·ªôt c√°i sticker r·ªìi xong, nh∆∞ng mong l√† em s·∫Ω ƒë·ªçc h·∫øt ƒëo·∫°n tin nh·∫Øn n√†y c·ªßa anh, xem xong em kh√¥ng tr·∫£ l·ªùi c≈©ng ƒë∆∞·ª£c. Nh∆∞ng m√† ch·ªâ mong em s·∫Ω ph·∫ßn n√†o hi·ªÉu cho anh h∆°n, anh c≈©ng ch·ªâ l√† th·∫±ng tr√£i qua ƒëau kh·ªï ƒëi t√¨m h·∫°nh ph√∫c th√¥i, t·ª± h·ªèi n·∫øu nh∆∞ m·ªôt ng√†y anh th·ª≠ im l·∫∑ng th√¨ trong kho·∫£ng l·∫∑ng ƒë√≥ em c√≥ ch√∫t n√†o b·∫≠n t√¢m hay suy nghƒ© nh·∫Øn cho anh hay kh√¥ng, kh√¥ng ph·∫£i anh b·∫Øt em ph·∫£i ch·ªß ƒë·ªông nh·∫Øn cho anh nh∆∞ng m√† ch·ªâ c·∫ßn m·ªôt c√¢u h·ªèi han anh th√¥i c≈©ng ƒë∆∞·ª£c r·ªìi. Anh l√† m·ªôt ƒë·ª©a hay suy nghƒ© nhi·ªÅu ch·∫Øc em c≈©ng bi·∫øt, t√¨nh y√™u m√† ƒë√¢u ph·∫£i l√∫c n√†o r√£nh m·ªõi nh·∫Øn tin cho nhau ƒë√¢u, h·∫°nh ph√∫c c·ªßa anh ƒë∆°n gi·∫£n ch·ªâ t·ª´ nh·ªØng l·ªùi quan t√¢m nh·ªè nh·∫∑t th√¥i. Anh bi·∫øt em c≈©ng ch·ªâ l√† ch·∫≠p ch·ª≠ng t·∫≠p y√™u n√™n anh c≈©ng mu·ªën n√≥i ra ƒë·ªÉ em hi·ªÉu anh h∆°n, y√™u em kh√¥ng bi·∫øt c·∫•t ƒë√¢u cho h·∫øt nh∆∞ng anh c≈©ng c·∫ßn s·ª± c·∫£m th√¥ng th·∫•u hi·ªÉu t·ª´ em nh∆∞ c√°ch anh c≈©ng ƒëang m·ªói ng√†y t√¨m hi·ªÉu, c·∫£m th√¥ng, th·∫•u hi·ªÉu cho em. Anh ƒë√£ coi em l√† t·∫•t c·∫£, l√† t∆∞∆°ng lai c·ªßa anh n√™n anh kh√¥ng mu·ªën v√¨ m·ªôt kho·∫£nh kh·∫Øc t·ªìi t·ªá m√† b·ªè l·ª° nhau. N·∫øu em ƒë·ªçc ƒë·∫øn ƒë√¢y th√¨ em c≈©ng ph·∫ßn n√†o hi·ªÉu r·ªìi, anh kh√¥ng mu·ªën em b√© c·ªßa anh v√¨ anh m√† ph·∫£i bu·ªìn v√¨ ƒëi·ªÅu g√¨ h·∫øt, anh c≈©ng ch·ªâ mu·ªën m·ªói khi anh v√¥ t√¨nh l√†m em bu·ªìn th√¨ em s·∫Ω c√πng anh ng·ªìi l·∫°i n√≥i r√µ m·ªçi chuy·ªán, v√† t·∫•t nhi√™n tr∆∞·ªõc ƒë√≥ ch·∫Øc ch·∫Øn anh s·∫Ω t·ª± bi·∫øt l·ªói c·ªßa m√¨nh. C·∫£m ∆°n ƒë√£ ƒë·ªçc ƒë·∫øn ƒë√¢y. Y√™u em nhi·ªÅu l·∫Ømüíï";
            
            function createHeart() {
                const heart = document.createElement('span');
                heart.classList.add('heart');
                heart.innerHTML = 'üíó'; // Bi·ªÉu t∆∞·ª£ng tr√°i tim l·∫•p l√°nh

                const isLeft = Math.random() < 0.5; // Random xem bay b√™n tr√°i hay ph·∫£i
                let startX;
                if (isLeft) {
                    startX = -20 + Math.random() * 50; // V·ªã tr√≠ ban ƒë·∫ßu h∆°i l·ªách ra ngo√†i b√™n tr√°i
                } else {
                    startX = container.offsetWidth - 30 - Math.random() * 50; // V·ªã tr√≠ ban ƒë·∫ßu h∆°i l·ªách ra ngo√†i b√™n ph·∫£i
                }

                // V·ªã tr√≠ y ban ƒë·∫ßu c·ªßa tr√°i tim s·∫Ω l√† ngay d∆∞·ªõi d√≤ng ch·ªØ ƒëang hi·ªÉn th·ªã
                const textRect = textElement.getBoundingClientRect();
                const containerRect = container.getBoundingClientRect();
                const startY = textRect.bottom - containerRect.top; // bottom c·ªßa text so v·ªõi top c·ªßa container

                heart.style.left = `${startX}px`;
                heart.style.top = `${startY}px`;
                
                // Random nh·∫π x-offset ƒë·ªÉ tr√°i tim bay lung tung h∆°n
                const xOffset = (Math.random() - 0.5) * 100; // -50px ƒë·∫øn 50px
                heart.style.setProperty('--x-offset', `${xOffset}px`);

                container.appendChild(heart);

                // X√≥a tr√°i tim sau khi animation k·∫øt th√∫c ƒë·ªÉ tr√°nh l√†m ƒë·∫ßy DOM
                heart.addEventListener('animationend', () => {
                    heart.remove();
                });
            }

            function typeWriter() {
                if (index < fullText.length) {
                    textElement.innerHTML += fullText.charAt(index);
                    index++;
                    // T·∫°o tr√°i tim sau m·ªói v√†i k√Ω t·ª± ho·∫∑c theo m·ªôt t·∫ßn su·∫•t nh·∫•t ƒë·ªãnh
                    if (index % 3 === 0) { // T·∫°o tr√°i tim sau m·ªói 3 k√Ω t·ª±
                        createHeart();
                    }
                    setTimeout(typeWriter, TYPING_SPEED);
                } else {
                    // K·∫æT TH√öC HI·ªÜU ·ª®NG CH·ªÆ
                    music.pause();
                    music.currentTime = 0; 
                    textElement.classList.remove('typing'); 
                    clearInterval(heartInterval); // D·ª´ng t·∫°o tr√°i tim khi ch·ªØ k·∫øt th√∫c
                }
            }

            startButton.addEventListener('click', () => {
                if (startButton.disabled) return;
                
                startButton.style.display = 'none'; 
                textElement.innerHTML = '';
                textElement.classList.add('typing'); 

                // L·ªói ch·∫∑n Autoplay ƒë∆∞·ª£c gi·∫£i quy·∫øt b·∫±ng t∆∞∆°ng t√°c n√†y
                music.play().catch(e => console.error("L·ªói ph√°t nh·∫°c:", e)); 
                
                index = 0;
                typeWriter();

                // B·∫Øt ƒë·∫ßu t·∫°o tr√°i tim li√™n t·ª•c trong khi ch·ªØ ƒëang ch·∫°y
                // C·ª© 150ms t·∫°o m·ªôt tr√°i tim m·ªõi
                heartInterval = setInterval(createHeart, 150); 

            }, { once: true }); 
        });
    </script>
</body>
</html>
